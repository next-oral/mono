[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m > @repo/zero@0.1.0 dev:clean C:\Users\HomePC\Desktop\Projects\mono\packages\zero
[38;2;50;100;140m[db][39m > pnpm with-env tsx src/scripts/clean.ts
[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m > @repo/zero@0.1.0 with-env C:\Users\HomePC\Desktop\Projects\mono\packages\zero
[38;2;50;100;140m[db][39m > dotenv -e ../../.env -- "tsx" "src/scripts/clean.ts"
[38;2;50;100;140m[db][39m 
[38;2;255;85;21m[seed][39m 
[38;2;255;85;21m[seed][39m > @repo/database@0.1.0 push C:\Users\HomePC\Desktop\Projects\mono\packages\database
[38;2;255;85;21m[seed][39m > pnpm with-env drizzle-kit push
[38;2;255;85;21m[seed][39m 
[38;2;50;100;140m[db][39m Cleaning up resources...
[38;2;50;100;140m[db][39m > rm -f .tmp/next-oral.db*
[38;2;50;100;140m[db][39m > docker rm -f next-oral
[38;2;255;17;204m[z0][39m 
[38;2;255;17;204m[z0][39m > @repo/zero@0.1.0 dev:zero C:\Users\HomePC\Desktop\Projects\mono\packages\zero
[38;2;255;17;204m[z0][39m > pnpm with-env zero-cache-dev
[38;2;255;17;204m[z0][39m 
[38;2;255;85;21m[seed][39m 
[38;2;255;85;21m[seed][39m > @repo/database@0.1.0 with-env C:\Users\HomePC\Desktop\Projects\mono\packages\database
[38;2;255;85;21m[seed][39m > dotenv -e ../../.env -- "drizzle-kit" "push"
[38;2;255;85;21m[seed][39m 
[38;2;50;100;140m[db][39m next-oral
[38;2;255;17;204m[z0][39m 
[38;2;255;17;204m[z0][39m > @repo/zero@0.1.0 with-env C:\Users\HomePC\Desktop\Projects\mono\packages\zero
[38;2;255;17;204m[z0][39m > dotenv -e ../../.env -- "zero-cache-dev"
[38;2;255;17;204m[z0][39m 
[38;2;50;100;140m[db][39m Cleanup complete.
[38;2;255;85;21m[seed][39m [90mNo config path provided, using default 'drizzle.config.ts'[39m
[38;2;255;85;21m[seed][39m [90mReading config file 'C:\Users\HomePC\Desktop\Projects\mono\packages\database\drizzle.config.ts'[39m
[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m > @repo/zero@0.1.0 dev:db C:\Users\HomePC\Desktop\Projects\mono\packages\zero
[38;2;50;100;140m[db][39m > pnpm with-env tsx src/scripts/db.ts
[38;2;50;100;140m[db][39m 
[38;2;17;255;204m[gz][39m Watching "'packages/database/src/schema/index.ts'", "generate-zero-schema'" ..
[38;2;255;17;204m[z0][39m [ [32m'pid=17384'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=17384'[39m ] Running zero-deploy-permissions.
[38;2;255;85;21m[seed][39m [90mUsing 'pg' driver for database querying[39m
[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m > @repo/zero@0.1.0 with-env C:\Users\HomePC\Desktop\Projects\mono\packages\zero
[38;2;50;100;140m[db][39m > dotenv -e ../../.env -- "tsx" "src/scripts/db.ts"
[38;2;50;100;140m[db][39m 
[38;2;255;17;204m[z0][39m [ [32m'pid=7516'[39m ] 
[38;2;255;17;204m[z0][39m Loading permissions from src/schema/index.ts
[38;2;255;85;21m[seed][39m [â£·] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£¯] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£Ÿ] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¡¿] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¢¿] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£»] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£½] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£·] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£¯] Pulling schema from database...
[38;2;255;17;204m[z0][39m [90mConnecting to upstream@localhost:5432[39m
[38;2;255;85;21m[seed][39m [2K[1G[â£Ÿ] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¡¿] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¢¿] Pulling schema from database...
[38;2;255;17;204m[z0][39m [33mzero-cache has not yet initialized the upstream database.[39m
[38;2;255;17;204m[z0][39m [33mDeploying zero permissions without validating against published tables/columns.[39m
[38;2;255;17;204m[z0][39m Deploying permissions for --app-id "zero" to upstream@localhost
[38;2;255;17;204m[z0][39m Permissions unchanged (hash=323e2d5)
[38;2;255;85;21m[seed][39m [2K[1G[â£»] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£½] Pulling schema from database...
[38;2;255;17;204m[z0][39m [ [32m'pid=17384'[39m ] zero-deploy-permissions completed successfully.
[38;2;255;17;204m[z0][39m [ [32m'pid=17384'[39m ] Running zero-cache at
[38;2;255;17;204m[z0][39m 
[38;2;255;17;204m[z0][39m 	http://localhost:4848
[38;2;255;17;204m[z0][39m 
[38;2;255;85;21m[seed][39m [2K[1G[â£·] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£¯] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£Ÿ] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¡¿] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¢¿] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£»] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£½] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£·] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£¯] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â£Ÿ] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¡¿] Pulling schema from database...
[38;2;255;85;21m[seed][39m [2K[1G[â¢¿] Pulling schema from database...
[38;2;50;100;140m[db][39m Attempting to start existing next-oral container...
[38;2;50;100;140m[db][39m > docker start -a next-oral
[38;2;255;85;21m[seed][39m [2K[1G[[32mâœ“[39m] Pulling schema from database...
[38;2;255;85;21m[seed][39m Â· You're about to add [4mdentist_email_unique[24m unique constraint to the table, which contains 10 items. If this statement fails, you will receive an error from the database. Do you want to truncate [4mdentist[24m table?
[38;2;255;85;21m[seed][39m 
[38;2;255;85;21m[seed][39m [?25l[32mâ¯ No, add the constraint without truncating the table[39m
[38;2;255;85;21m[seed][39m   Yes, truncate the table
[38;2;50;100;140m[db][39m Error response from daemon: No such container: next-oral
[38;2;50;100;140m[db][39m Command failed: docker start -a next-oral
[38;2;50;100;140m[db][39m Existing next-oral container not found or could not be started. Creating a new one...
[38;2;50;100;140m[db][39m > docker volume create next-oral-pgdata
[38;2;50;100;140m[db][39m next-oral-pgdata
[38;2;50;100;140m[db][39m > docker run --name next-oral -e POSTGRES_PASSWORD=password -p 5432:5432 -v next-oral-pgdata:/var/lib/postgresql/data postgres -c wal_level=logical
[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m PostgreSQL Database directory appears to contain a database; Skipping initialization
[38;2;50;100;140m[db][39m 
[38;2;50;100;140m[db][39m 2025-10-09 18:00:42.844 UTC [1] LOG:  starting PostgreSQL 18.0 (Debian 18.0-1.pgdg13+3) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
[38;2;50;100;140m[db][39m 2025-10-09 18:00:42.865 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[38;2;50;100;140m[db][39m 2025-10-09 18:00:42.865 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[38;2;50;100;140m[db][39m 2025-10-09 18:00:42.885 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[38;2;50;100;140m[db][39m 2025-10-09 18:00:42.929 UTC [33] LOG:  database system was shut down at 2025-10-09 17:51:12 UTC
[38;2;50;100;140m[db][39m 2025-10-09 18:00:43.001 UTC [1] LOG:  database system is ready to accept connections
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m ] network interfaces {"preferred":"172.27.48.1","interfaces":{"Wi-Fi":[{"address":"fe80::6236:7b46:9e0f:379b","netmask":"ffff:ffff:ffff:ffff::","family":"IPv6","mac":"50:e0:85:45:0c:a4","internal":false,"cidr":"fe80::6236:7b46:9e0f:379b/64","scopeid":10},{"address":"192.168.1.177","netmask":"255.255.255.0","family":"IPv4","mac":"50:e0:85:45:0c:a4","internal":false,"cidr":"192.168.1.177/24"}],"Loopback Pseudo-Interface 1":[{"address":"::1","netmask":"ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff","family":"IPv6","mac":"00:00:00:00:00:00","internal":true,"cidr":"::1/128","scopeid":0},{"address":"127.0.0.1","netmask":"255.0.0.0","family":"IPv4","mac":"00:00:00:00:00:00","internal":true,"cidr":"127.0.0.1/8"}],"vEthernet (Default Switch)":[{"address":"fe80::488e:1da3:36d6:64bd","netmask":"ffff:ffff:ffff:ffff::","family":"IPv6","mac":"00:15:5d:e4:fa:00","internal":false,"cidr":"fe80::488e:1da3:36d6:64bd/64","scopeid":35},{"address":"172.29.0.1","netmask":"255.255.240.0","family":"IPv4","mac":"00:15:5d:e4:fa:00","internal":false,"cidr":"172.29.0.1/20"}],"vEthernet (WSL (Hyper-V firewall))":[{"address":"fe80::4246:28d2:d8ce:e172","netmask":"ffff:ffff:ffff:ffff::","family":"IPv6","mac":"00:15:5d:5c:ed:b2","internal":false,"cidr":"fe80::4246:28d2:d8ce:e172/64","scopeid":46},{"address":"172.27.48.1","netmask":"255.255.240.0","family":"IPv4","mac":"00:15:5d:5c:ed:b2","internal":false,"cidr":"172.27.48.1/20"}]}}
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m ] runtime env: taskID=6Md2JSt5m8og4kx-3JcER, hostIP=172.27.48.1
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m ] starting server@0.23.2025090100 protocolVersion=29
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m ] starting zero-cache
[38;2;255;17;204m[z0][39m [ [32m'pid=21936'[39m, [32m'worker=dispatcher'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=21936'[39m, [32m'worker=dispatcher'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=5208'[39m, [32m'worker=reaper'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=5208'[39m, [32m'worker=reaper'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=5208'[39m, [32m'worker=reaper'[39m, [32m'initSchema=zero_0/cvr'[39m ] Checking schema for compatibility with view-syncer at schema v14
[38;2;255;17;204m[z0][39m [ [32m'pid=5208'[39m, [32m'worker=reaper'[39m, [32m'initSchema=zero_0/cvr'[39m ] Running view-syncer at schema v14
[38;2;255;17;204m[z0][39m [90mpid=21936,worker=dispatcher,component=process-manager reaper.ts ready (5051 ms)[39m
[38;2;255;17;204m[z0][39m [ [32m'pid=5208'[39m, [32m'worker=reaper'[39m ] purged 0 inactive CVRs. Next purge in 120000 ms
[38;2;255;17;204m[z0][39m [ [32m'pid=20268'[39m, [32m'worker=change-streamer'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=20268'[39m, [32m'worker=change-streamer'[39m ] 
[38;2;255;17;204m[z0][39m [ [32m'pid=20268'[39m, [32m'worker=change-streamer'[39m, [32m'initSchema=1ouesmybhkv'[39m ] Checking schema for compatibility with replica-zero-0 at schema v5
[38;2;255;17;204m[z0][39m [ [32m'pid=20268'[39m, [32m'worker=change-streamer'[39m, [32m'initSchema=1ouesmybhkv'[39m ] Migrating schema from v0 to v5
[38;2;255;17;204m[z0][39m [ [32m'pid=20268'[39m, [32m'worker=change-streamer'[39m, [32m'initSchema=1ouesmybhkv'[39m ] ZeroEvent: zero/events/status/replication/v1 {"type":"zero/events/status/replication/v1","component":"replication","status":"OK","stage":"Initializing","time":"2025-10-09T18:00:59.153Z","tables":[],"indexes":[],"replicaSize":8192}
[38;2;255;17;204m[z0][39m [33mpid=20268,worker=change-streamer,initSchema=1ouesmybhkv dropping replication slot zero_0_1760032859153 {}[39m
[38;2;255;17;204m[z0][39m [ [32m'pid=20268'[39m, [32m'worker=change-streamer'[39m, [32m'initSchema=1ouesmybhkv'[39m ] ZeroEvent: zero/events/status/replication/v1 {"type":"zero/events/status/replication/v1","component":"replication","status":"ERROR","stage":"Initializing","description":"Error: Postgres must be configured with \"wal_level = logical\" (currently: \"replica)","time":"2025-10-09T18:00:59.762Z","tables":[],"indexes":[],"replicaSize":8192,"errorDetails":{"name":"Error","message":"Postgres must be configured with \"wal_level = logical\" (currently: \"replica)","stack":"Error: Postgres must be configured with \"wal_level = logical\" (currently: \"replica)\n    at checkUpstreamConfig (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/services/change-source/pg/initial-sync.js:161:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async initialSync (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/services/change-source/pg/initial-sync.js:40:9)\n    at async runMigration (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/db/migration-lite.js:158:9)\n    at async file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/db/migration-lite.js:52:40\n    at async runTransaction (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/db/migration-lite.js:187:24)\n    at async runSchemaMigrations (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/db/migration-lite.js:48:32)\n    at async initReplica (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/services/change-source/replica-schema.js:11:9)\n    at async initSyncSchema (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/services/change-source/pg/sync-schema.js:4:5)\n    at async initializePostgresChangeSource (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/@rocicorp/zero/out/zero-cache/src/services/change-source/pg/change-source.js:36:5)"}}
[38;2;255;17;204m[z0][39m [31mpid=20268,worker=change-streamer,initSchema=1ouesmybhkv Aborted transaction due to error {}[39m
[38;2;255;17;204m[z0][39m [31mpid=20268,worker=change-streamer,initSchema=1ouesmybhkv Error in ensureSchemaMigrated {}[39m
[38;2;255;17;204m[z0][39m pid 20268 exiting with error Error: Postgres must be configured with "wal_level = logical" (currently: "replica)
[38;2;255;17;204m[z0][39m     at checkUpstreamConfig (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/services/change-source/pg/initial-sync.js:161:15)
[38;2;255;17;204m[z0][39m [90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
[38;2;255;17;204m[z0][39m     at async initialSync (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/services/change-source/pg/initial-sync.js:40:9)
[38;2;255;17;204m[z0][39m     at async runMigration (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/db/migration-lite.js:158:9)
[38;2;255;17;204m[z0][39m     at async file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/db/migration-lite.js:52:40
[38;2;255;17;204m[z0][39m     at async runTransaction (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/db/migration-lite.js:187:24)
[38;2;255;17;204m[z0][39m     at async runSchemaMigrations (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/db/migration-lite.js:48:32)
[38;2;255;17;204m[z0][39m     at async initReplica (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/services/change-source/replica-schema.js:11:9)
[38;2;255;17;204m[z0][39m     at async initSyncSchema (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/services/change-source/pg/sync-schema.js:4:5)
[38;2;255;17;204m[z0][39m     at async initializePostgresChangeSource (file:///C:/Users/HomePC/Desktop/Projects/mono/node_modules/[4m@rocicorp[24m/zero/out/zero-cache/src/services/change-source/pg/change-source.js:36:5)
[38;2;255;17;204m[z0][39m [31mpid=21936,worker=dispatcher,component=process-manager change-streamer.ts (20268) exited with code (4294967295) [39m
[38;2;255;17;204m[z0][39m [ [32m'pid=21936'[39m, [32m'worker=dispatcher'[39m, [32m'component=process-manager'[39m ] exiting with code -1
[38;2;255;17;204m[z0][39m [ [32m'pid=21936'[39m, [32m'worker=dispatcher'[39m, [32m'component=process-manager'[39m ] stopping process-manager 
[38;2;255;17;204m[z0][39m [31mpid=19740,worker=runner,component=process-manager zero-cache (21936) exited with code (4294967295) [39m
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m, [32m'component=process-manager'[39m ] all user-facing workers exited
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m, [32m'component=process-manager'[39m ] exiting with code 0
[38;2;255;17;204m[z0][39m [ [32m'pid=19740'[39m, [32m'worker=runner'[39m, [32m'component=process-manager'[39m ] stopping process-manager 
[38;2;255;17;204m[z0][39m [31mpid=17384 zero-cache exited. Exiting.[39m
[38;2;255;17;204m[z0][39m [41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 4294967295.[39m
